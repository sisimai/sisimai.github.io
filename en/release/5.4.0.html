---
"layout": "document"
"directory": "release/"
"title": "Sisimai 5.4.0 RELEASE"
"description": "Release notes for Sisimai 5.4.0/All the cahnges"
"author": "azumakuniyuki"
---
<a id = 'tohash' href = '#'></a>
<header id = 'home'>
    <div class = 'main-nav'>
        <div class = 'container'>
            <div class = 'navbar-header'>
                <button type = 'button' class = 'navbar-toggle' data-toggle = 'collapse' data-target = '.navbar-collapse'>
                    <span class = 'sr-only'>Toggle navigation</span>
                    <span class = 'icon-bar'></span>
                    <span class = 'icon-bar'></span>
                    <span class = 'icon-bar'></span>
                </button>
                <a class = 'navbar-brand' href = '/'>
                    <h1>
                        <img class = 'img-responsive' src = '/static/images/logo/sisimai-logotype-w11.png' 
                            width = '144' alt = 'Sisimai: Mail Analyzing Interface'>
                    </h1>
                </a>
            </div>
            <div class = 'collapse navbar-collapse'>
                <ul class = 'nav navbar-nav navbar-right'>
                    <li class = 'others'><a href = '/en'><i class = 'fa fa-home'></i></a></li>
                    <li class = 'scroll active'><a href = '#index'><i class = 'fa fa-arrow-circle-up'></i></a></li>
                    <li class = 'others'><a href = '/en/release/'>Releases</a></li> 
                    <li class = 'others'><a href = 'https://blog.libsisimai.org/' target = 'new'>Old Releases</a></li> 
                    <li class = 'others'><a href = '/en/docs/'>DOcs</a></li>
                    <li class = 'others'><a href = '/ja/release/5.4.0.html'><i class = 'fa fa-language'></i></a></li>
                    <li class = 'others'><a href = 'https://github.com/sisimai' target = 'new'><i class = 'fa fa-github'></i></a></li>
                </ul>
            </div>
        </div>
    </div> <!-- /#main-nav -->
</header> <!-- /#home -->

<section id = 'index'>
    <div class = 'container'>
        <div class = 'heading'>
            <div class = 'row'>
                <div class = 'text-center col-sm-8 col-sm-offset-2'>
                    <img src = '/static/images/logo/sisimai-x01.png' width = '20%'>
                    <h2>Release Notes</h2>
                </div>
            </div> 
        </div>
    </div>
</section> <!-- /#index -->

<section id = 'release-notes' class = 'not-parallax'>
    <div class = 'container'>
        <div class = 'row'>
            <div class = 'col-sm-1 col-sm-offset-1'>
                <div class = 'post-it'>
                    <i class = 'fa-solid fa-torii-gate'></i>
                </div>
            </div>
            <div class = 'heading col-sm-8 col-sm-offset-0'>
                <h2 class = 'in-desc'>{{ site.html.ss }} 5.4.0</h2>
                <hr>
                <h3 class = 'in-desc'>2025/07/01</h3>
                <p class = 'description'>
                    {{ site.html.ss }} 5.4.0 has been released. The main changes in this version include:
                    Implementation of new error codes of Microsoft and Google,
                    The Ruby version of Sisimai now supports frozen string literals,
                    The Go version of Sisimai includes <strong>breaking changes</strong>,
                    requiring Go 1.24 or later and with
                    <kbd>sisimai.Rise()</kbd> now returning slices instead of pointers. 
                </p>
                <p class = 'description'>
                    Changes specific to the Perl version of {{ site.html.ss }} are indicated by
                    <span class = 'lang perl'>Perl</span> at the beginning of each item,
                    changes specific to the Ruby version of {{ site.html.ss }} are indicated by <span class = 'lang ruby'>Ruby</span>,
                    and changes specific to the Go version of {{ site.html.ss }} are indicated by <span class = 'lang golang'>Go</span>.
                </p>
                <div class = 'warning'>
                    <i class = 'fa fa-triangle-exclamation'></i>
                    And then, {{ site.html.ss }} 5 includes
                    <a href = '/en/diff'>many changes that are not compatible with Version 4</a>,
                    so please check the Perl or Ruby version of your environment before installing
                    or upgrading.
                </div>
            </div>
        </div>

        <div class = 'row'>
            <div class = 'col-sm-1 col-sm-offset-1'>
                <div class = 'index-label'><i class = 'fas fa-star'></i></div>
            </div>
            <div class = 'col-sm-8 col-sm-offset-0'>
                <h3 class = 'in-desc'>Changes</h3>
                <ul class = 'release-notes'>
                    <li>
                        <span class = 'lang golang'>Go</span>
                        <i class = 'fa fa-triangle-exclamation'></i>
                        <strong>
                            <kbd>sisimai.Rise()</kbd> function now return slices: <kbd>[]sis.Fact</kbd>
                            and <kbd>[]sis.NotDecoded</kbd> instead of pointers. 
                        </strong>
                        Thanks to <a href = 'https://github.com/corny' target = 'new'>@corny</a>
                        <a href = 'https://github.com/sisimai/go-sisimai/issues/119' target = 'new'>#119</a>
                        <a href = 'https://github.com/sisimai/go-sisimai/issues/145' target = 'new'>#145</a>
                        <a href = 'https://github.com/sisimai/go-sisimai/issues/148' target = 'new'>#148</a>
                    </li>
                    <li>
                        <span class = 'lang golang'>Go</span>
                        <i class = 'fa fa-triangle-exclamation'></i>
                        The minimum Go version required to run {{ site.html.ss }} is now <strong>Go 1.24</strong>.
                        <a href = 'https://github.com/sisimai/go-sisimai/issues/112' target = 'new'>#112</a>
                        <a href = 'https://github.com/sisimai/go-sisimai/issues/127' target = 'new'>#127</a>
                    </li>
                    <ul>
                        <li>
                            Fixed out of bounds read at <kbd>EmailEntity.setNewLine()</kbd> function in <kbd>mail/lib.go</kbd>
                            using the build-in <kbd>min()</kbd> function.
                            Thanks to <a href = 'https://github.com/VolkerLieber' target = 'new'>@VolkerLieber</a>
                            <a href = 'https://github.com/sisimai/go-sisimai/issues/110' target = 'new'>#110</a>
                        </li>
                        <li>
                            Use <kbd>strings.Cut()</kbd> instead of </kbd>strings.SplitN(v,s,2)</kbd> and
                            <kbd>v[n:strings.Index(v,s)]</kbd>.
                            <a href = 'https://github.com/sisimai/go-sisimai/issues/116' target = 'new'>#116</a>
                            <a href = 'https://github.com/sisimai/go-sisimai/issues/117' target = 'new'>#117</a>
                        </li>
                        <li>
                            Use <kbd>slices.Contains()</kbd> instead of <kbd>moji.EqualsAny()</kbd>.
                            <a href = 'https://github.com/sisimai/go-sisimai/issues/118' target = 'new'>#118</a>
                            <a href = 'https://github.com/sisimai/go-sisimai/issues/122' target = 'new'>#122</a>
                        </li>
                        <li>
                            Use <kbd>strings.Lines()</kbd> instead of <kbd>strings.Split(v, "\n")</kbd>.
                            <a href = 'https://github.com/sisimai/go-sisimai/issues/123' target = 'new'>#123</a>
                            <a href = 'https://github.com/sisimai/go-sisimai/issues/128' target = 'new'>#128</a>
                        </li>
                    </ul>
                    <li>
                        Implement new error codes of Google:<span class = 'value'>4.7.40</span> and 
                        <span class = 'value'>5.7.32</span> as <span class = 'value'>AuthFailure</span>.
                        <a href = 'https://github.com/sisimai/p5-sisimai/issues/590' target = 'new'>#590</a>
                        <a href = 'https://github.com/sisimai/p5-sisimai/issues/591' target = 'new'>#591</a>
                        <a href = 'https://github.com/sisimai/rb-sisimai/issues/349' target = 'new'>#349</a>
                        <a href = 'https://github.com/sisimai/rb-sisimai/issues/350' target = 'new'>#350</a>
                        <a href = 'https://github.com/sisimai/go-sisimai/issues/104' target = 'new'>#104</a>
                        <a href = 'https://github.com/sisimai/go-sisimai/issues/152' target = 'new'>#152</a>
                    </li>
                    <li>
                        Implement the new status code <span class = 'value'>5.7.515</span> as <span class = 'value'>AuthFailure</span>
                        and other undocumented status codes begin with <span class = 'value'>4.4.</span> as
                        <span class = 'value'>SystemError</span> of Microsoft.
                        <a href = 'https://github.com/sisimai/go-sisimai/issues/107' target = 'new'>#107</a>
                        <a href = 'https://github.com/sisimai/go-sisimai/issues/108' target = 'new'>#108</a>
                        <a href = 'https://github.com/sisimai/go-sisimai/issues/149' target = 'new'>#149</a>
                        <a href = 'https://github.com/sisimai/go-sisimai/issues/150' target = 'new'>#150</a>
                        <a href = 'https://github.com/sisimai/go-sisimai/issues/151' target = 'new'>#151</a>
                        <a href = 'https://github.com/sisimai/p5-sisimai/issues/588' target = 'new'>#588</a>
                        <a href = 'https://github.com/sisimai/p5-sisimai/issues/589' target = 'new'>#589</a>
                        <a href = 'https://github.com/sisimai/rb-sisimai/issues/342' target = 'new'>#342</a>
                        <a href = 'https://github.com/sisimai/rb-sisimai/issues/345' target = 'new'>#345</a>
                        <a href = 'https://github.com/sisimai/rb-sisimai/issues/348' target = 'new'>#348</a>
                    </li>
                    <li>
                        <span class = 'lang ruby'>Ruby</span>
                        The Ruby version of {{ site.html.ss }} now supports frozen string literals.
                        <a href = 'https://github.com/sisimai/rb-sisimai/issues/347' target = 'new'>#347</a>
                    </li>
                    <li>
                        <span class = 'lang perl'>Perl</span>
                        <span class = 'lang ruby'>Ruby</span>
                        Standardise return values to align with zero value principle.
                        <a href = 'https://github.com/sisimai/p5-sisimai/issues/586' target = 'new'>#586</a>
                        <a href = 'https://github.com/sisimai/p5-sisimai/issues/587' target = 'new'>#587</a>
                        <a href = 'https://github.com/sisimai/rb-sisimai/issues/343' target = 'new'>#343</a>
                        <a href = 'https://github.com/sisimai/rb-sisimai/issues/346' target = 'new'>#346</a>
                    </li>
                    <li>
                        <span class = 'lang golang'>Go</span>
                        Fix spell errors in some documents.
                        <a href = 'https://github.com/sisimai/go-sisimai/issues/109' target = 'new'>#109</a>
                        <a href = 'https://github.com/sisimai/go-sisimai/issues/115' target = 'new'>#115</a>
                    </li>
                    <li>
                        <span class = 'lang golang'>Go</span>
                        Set a pointer to <kbd>sis.DecodingArgs</kbd> struct when the 2nd argument of
                        <kbd>sisimai.Rise()</kbd> is <kbd>nil</kbd>.
                        Thanks to <a href = 'https://github.com/VolkerLieber' target = 'new'>@VolkerLieber</a>
                        <a href = 'https://github.com/sisimai/go-sisimai/issues/111' target = 'new'>#111</a>
                        <a href = 'https://github.com/sisimai/go-sisimai/issues/113' target = 'new'>#113</a>
                    </li>
                    <li>
                        <span class = 'lang golang'>Go</span>
                        Use golangci-lint with the minimum linters. 
                        Thanks to <a href = 'https://github.com/corny' target = 'new'>@corny</a>
                        <a href = 'https://github.com/sisimai/go-sisimai/issues/120' target = 'new'>#120</a>
                        <a href = 'https://github.com/sisimai/go-sisimai/issues/121' target = 'new'>#121</a>
                    </li>
                    <li>
                        <span class = 'lang golang'>Go</span>
                        <kbd>moji.Squeeze()</kbd> and <kbd>mail.setNewLine()</kbd> no longer returns any value.
                        <a href = 'https://github.com/sisimai/go-sisimai/issues/124' target = 'new'>#124</a>
                        <a href = 'https://github.com/sisimai/go-sisimai/issues/125' target = 'new'>#125</a>
                    </li>
                    <li>
                        <span class = 'lang golang'>Go</span>
                        Use iota instead of <kbd>lhost.DeliveryStatus</kbd> hash map.
                        <a href = 'https://github.com/sisimai/go-sisimai/issues/131' target = 'new'>#131</a>
                        <a href = 'https://github.com/sisimai/go-sisimai/issues/132' target = 'new'>#132</a>
                    </li>
                    <li>
                        <span class = 'lang golang'>Go</span>
                        use the <kbd>switch</kbd> statement without a condition instead of the infinite
                        <kbd>for</kbd> loop and the <kbd>if</kbd> statement.
                        <a href = 'https://github.com/sisimai/go-sisimai/issues/133' target = 'new'>#133</a>
                        <a href = 'https://github.com/sisimai/go-sisimai/issues/134' target = 'new'>#134</a>
                    </li>
                    <li>
                        <span class = 'lang golang'>Go</span>
                        <kbd>moji.IsContained()</kbd> instead of <kbd>string.Contains()</kbd> in some loops.
                        <a href = 'https://github.com/sisimai/go-sisimai/issues/135' target = 'new'>#135</a>
                    </li>
                    <li>
                        <span class = 'lang golang'>Go</span>
                        Implement <kbd>moji.AlignedAny()</kbd> function in <kbd>moji/any.go</kbd>.
                        <a href = 'https://github.com/sisimai/go-sisimai/issues/136' target = 'new'>#136</a>
                        <a href = 'https://github.com/sisimai/go-sisimai/issues/137' target = 'new'>#137</a>
                    </li>
                    <li>
                        <span class = 'lang golang'>Go</span>
                        <kbd>reason.GetRetried</kbd> has been replaced with <kbd>reason.ShouldBeRetried()</kbd> function.
                        <a href = 'https://github.com/sisimai/go-sisimai/issues/139' target = 'new'>#139</a>
                        <a href = 'https://github.com/sisimai/go-sisimai/issues/141' target = 'new'>#141</a>
                    </li>
                    <li>
                        <span class = 'lang golang'>Go</span>
                        Tiny code improvements in <kbd>reason.IsExplicit()</kbd> function.
                        <a href = 'https://github.com/sisimai/go-sisimai/issues/140' target = 'new'>#140</a>
                    </li>
                    <li>
                        <span class = 'lang golang'>Go</span>
                        Change the order of fields in some structs to improve memory alignment.
                        <a href = 'https://github.com/sisimai/go-sisimai/issues/142' target = 'new'>#142</a>
                        <a href = 'https://github.com/sisimai/go-sisimai/issues/143' target = 'new'>#143</a>
                    </li>
                    <li>
                        <span class = 'lang golang'>Go</span>
                        Adopt idiomatic Go style by returning direct slices instead of pointers to slices
                        in some functions except <kbd>sisimai.Rise()</kbd>.
                        <a href = 'https://github.com/sisimai/go-sisimai/issues/146' target = 'new'>#146</a>
                        <a href = 'https://github.com/sisimai/go-sisimai/issues/147' target = 'new'>#147</a>
                    </li>
                </ul>
            </div>
        </div>

    </div>
</section> <!-- /#release-notes -->

